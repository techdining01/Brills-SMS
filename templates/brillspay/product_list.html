{% extends "base.html" %}
{% load static %}

{% block title %}Shop | BrillsPay{% endblock %}

{% block extra_css %}
<style>
.cart-sidebar{
position:fixed;top:0;right:-380px;width:360px;height:100vh;
background:#fff;z-index:1050;transition:right .35s ease;
box-shadow:-5px 0 25px rgba(0,0,0,.15);display:flex;flex-direction:column;
}
.cart-sidebar.show{right:0}
#cart-overlay{
position:fixed;inset:0;background:rgba(0,0,0,.45);
z-index:1040;opacity:0;pointer-events:none;transition:.25s;
}
#cart-overlay.show{opacity:1;pointer-events:auto}
body.cart-open{overflow:hidden}
</style>
{% endblock %}
{% block content %}
<div class="container brillspay-shop">

  <h5 class="fw-bold mb-3">
    {{ ward.get_full_name }} Â· {{ ward.student_class }}
  </h5>

  <div class="row g-3">
    {% for product in products %}
      <div class="col-6 col-md-4 col-lg-3">
        <div class="product-card">

          <div class="product-image">
            {% if product.image %}
              <img src="{{ product.image.url }}" alt="{{ product.name }}">
            {% else %}
              <img src="{% static 'images/default_product.png' %}" alt="{{ product.name }}">
            {% endif %}
          </div>

          <div class="p-2">
            <div class="fw-semibold">{{ product.name }}</div>
            <div class="fw-bold">â‚¦{{ product.price }}</div>

            <button
              class="btn btn-primary btn-sm w-100 btn-add-cart"
              data-product="{{ product.id }}"
              data-ward="{{ ward.id }}">
              Add to Cart
            </button>
          </div>

        </div>
      </div>
    {% endfor %}
  </div>

</div>

<!-- CART OVERLAY -->
<div id="cart-overlay"></div>

<!-- CART SIDEBAR -->
<div id="cartSidebar" class="cart-sidebar">
  <div class="p-3 border-bottom d-flex justify-content-between">
    <strong>Your Cart</strong>
    <button class="btn-close" onclick="closeCart()"></button>
  </div>
  <div class="p-3 flex-grow-1 overflow-auto" id="cartBody"></div>
</div>

<!-- FLOATING CART BUTTON -->
<button class="btn btn-dark floating-cart-btn" onclick="openCart()">
  ðŸ›’ Cart <span id="cartCount" class="badge bg-danger">0</span>
</button>

{% endblock %}

{% block extra_js %}
<script>

</script>
{% endblock %}
