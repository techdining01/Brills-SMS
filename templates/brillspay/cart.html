{% extends "base.html" %}
{% load static %}

{% block content %}
<h4>Cart for {{ ward.get_full_name }}</h4>

{% if cart.items.exists %}
  <div class="table-responsive">
    <table class="table align-middle table-responsive-stack">
      <thead>
        <tr>
          <th>Product</th>
          <th>Qty</th>
          <th>Price</th>
          <th>Subtotal</th>
        </tr>
      </thead>
      <tbody>
        {% for item in cart.items.all %}
        <tr>
          <td data-label="Product">
            <div class="d-flex align-items-center gap-3">
              {% if item.product.image %}
                <img src="{{ item.product.image.url }}" alt="{{ item.product.name }}" style="width:64px;height:64px;object-fit:cover;" class="rounded">
              {% else %}
                <img src="{% static 'images/default_product.png' %}" alt="No image" style="width:64px;height:64px;object-fit:cover;" class="rounded">
              {% endif %}
              <div>
                {{ item.product.name }}
              </div>
            </div>
          </td>
          <td data-label="Qty">{{ item.quantity }}</td>
          <td data-label="Price">₦{{ item.product.price }}</td>
          <td data-label="Subtotal">₦{{ item.subtotal }}</td>
        </tr>
        {% endfor %}
        <tr>
          <th colspan="3" class="text-end d-none d-md-table-cell">Total</th>
          <th data-label="Total" class="text-primary fs-5">₦{{ cart.total_amount }}</th>
        </tr>
      </tbody>
    </table>
  </div>
{% else %}
  <p>No items in cart.</p>
{% endif %}
{% endblock %}
